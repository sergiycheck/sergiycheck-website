import Head from 'next/head';
import Link from 'next/link';
import React from 'react';
import { motion } from 'framer-motion';
import { DarkModeSwitcher } from './DarkModeSwitcher';
import { Anchor1 } from './common/shared';

function LayoutPartial({ children }: { children: React.ReactNode }) {
  return (
    <div className="min-h-screen flex flex-col">
      <Head>
        <title>Full stack Node.js developer</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <main className="container grow mx-auto pt-4 flex flex-col gap-4">
        {children}
      </main>

      <footer className="container flex-none mx-auto p-4">
        <Link href="/" className="font-bold">
          Home
        </Link>
      </footer>
    </div>
  );
}

function LayoutNavBar({ children }: { children: React.ReactNode }) {
  return (
    <>
      <div className="container mx-auto px-4 py-5">
        <ul className="columns-2">
          <li className="p-2">
            <Link href="/" className="font-bold">
              Home
            </Link>
          </li>
          {/* TODO: add link to custom posts about js and different fields */}

          <li className="font-bold p-2">
            <DarkModeSwitcher />
          </li>
        </ul>
      </div>

      {children}
    </>
  );
}

export const Layout = React.forwardRef(
  (
    {
      children,
    }: {
      children: React.ReactNode;
    },
    ref?: React.Ref<HTMLDivElement> | undefined
  ) => {
    return (
      <motion.div
        ref={ref}
        className="min-h-screen bg-white dark:bg-slate-800 text-black dark:text-white"
      >
        <LayoutNavBar>
          <LayoutPartial>{children}</LayoutPartial>
        </LayoutNavBar>
      </motion.div>
    );
  }
);

Layout.displayName = 'Layout';
